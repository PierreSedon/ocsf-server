<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Splunk Event Schema server">
    <title>Splunk Event Schema</title>

    <!-- Bootstrap CSS -->
    <%# <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous"> %>
    <link rel="stylesheet" href='<%= Routes.static_path(@conn, "/css/bootstrap.min.css") %>'/>
    <link rel="stylesheet" href='<%= Routes.static_path(@conn, "/css/all.css") %>'/>
    <link rel="stylesheet" href='<%= Routes.static_path(@conn, "/css/app.css") %>'/>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
  </head>
  <body class="bg-light">
    <nav class="navbar fixed-top navbar-light bg-light navbar-expand-md">
      <img src='<%= Routes.static_path(@conn, "/images/home.svg") %>' class="logo" alt="" >
      <button class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarCollapse">
        <div class="navbar-nav mr-auto">
          <a id="home_id" class="nav-item nav-link" href='<%= Routes.static_path(@conn, "/") %>'>Home</a>
          <a id="dictionary_id" class="nav-item nav-link" href='<%= Routes.static_path(@conn, "/dictionary") %>'>Dictionary</a>
          <a id="base_event_id" class="nav-item nav-link" href='<%= Routes.static_path(@conn, "/base_event") %>'>Base Event</a>
          <a id="objects_id" class="nav-item nav-link" href='<%= Routes.static_path(@conn, "/objects") %>'>Objects</a>
          <a id="classes_id" class="nav-item nav-link" href='<%= Routes.static_path(@conn, "/classes") %>'>Event Classes</a>
          <a id="data_types_id" class="nav-item nav-link" href='<%= Routes.static_path(@conn, "/data_types") %>'>Data Types</a>
          <a id="guidelines_id" class="nav-item nav-link" href='<%= Routes.static_path(@conn, "/guidelines") %>'>Guidelines</a>
        </div>

        <div id="extensions" class="form-inline nav-controls">
          <div class="custom-control custom-checkbox mt-1">
            <input type="checkbox" class="custom-control-input" id="btn-reserved" autocomplete="off" />
            <label class="custom-control-label mr-2" for="btn-reserved">Reserved</label>
          </div>
          <div class="custom-control custom-checkbox mt-1">
            <input type="checkbox" class="custom-control-input" id="btn-extensions" autocomplete="off" />
            <label class="custom-control-label mr-2" for="btn-extensions">Optional</label>
          </div>
          <div class="custom-control mr-2 mt-1">
            <button type="button" id="btn-example" class="btn btn-light btn-sm">Sample</button>
          </div>
          <input type="text" id="tableSearch" onkeyup="searchInTable()"
            class="form-control" placeholder="Search" aria-label="Search" autofocus>
        </div>
      </div>
    </nav>

    <div class="pt-4 pb-4">
      <main role="main" class="container-fluid mt-5">
        <%= @inner_content %>
      </main>
    </div>

    <div class="footer">
      Slpunk Event Schema v<%= Schema.version() %> &copy; 2005-2021 Splunk Inc. All rights reserved.
    </div>

    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>

    <script type="text/javascript" src='<%= Routes.static_path(@conn, "/js/sorttable.js") %>'></script>
    <script type="text/javascript" src='<%= Routes.static_path(@conn, "/js/app.js") %>'></script>

    <script>
      $( document ).ready(function() {
        $("a.nav-item.nav-link.active").removeClass("active");
        switch (window.location.pathname)
        {
          case '/':
            $('#home_id').addClass("active");
            break;
          case '/dictionary':
            $('#dictionary_id').addClass("active");
            break;
          case '/base_event':
            $('#base_event_id').addClass("active");
            break;
          case '/objects':
            $('#objects_id').addClass("active");
            break;
          case '/classes':
            $('#classes_id').addClass("active");
            break;
          case '/data_types':
            $('#data_types_id').addClass("active");
            break;
          case '/guidelines':
            $('#guidelines_id').addClass("active");
            break;
       }
      });

    const reserved = window.localStorage.reserved === "true";
    $('#btn-reserved').prop("checked", reserved);
    if (reserved) {
      $('.reserved').removeClass('d-none');
    } else {
      // hide
      $('.reserved').addClass('d-none');
    }

    $('#btn-reserved').on('click', function (e) {
      if (e.target.checked) {
        window.localStorage.reserved = true;
        $('.reserved').removeClass('d-none');
      } else {
        // hide
        window.localStorage.reserved = false;
        $('.reserved').addClass('d-none');
      }
    })

    const extensions = window.localStorage.extensions === "true";
    $('#btn-extensions').prop("checked", extensions);
    if (extensions) {
      $('.extension').removeClass('d-none');
    } else {
      // hide
      $('.extension').addClass('d-none');
    }

    $('#btn-extensions').on('click', function (e) {
      if (e.target.checked) {
        window.localStorage.extensions = true;
        $('.extension').removeClass('d-none');
      } else {
        // hide
        window.localStorage.extensions = false;
        $('.extension').addClass('d-none');
      }
    })

    </script>

  </body>
</html>
